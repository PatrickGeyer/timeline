$.fn.timeline=function(b){var d=function(l){var n={};$.each(f,function(o,q){if(typeof l.attr("data-tl-"+[o])!=="undefined"&&typeof l.attr("data-tl-"+[o])!==false){try{n[[o]]=$.parseJSON(l.attr("data-tl-"+[o]));return true}catch(p){}if(typeof n[o]!=="object"){n[[o]]=l.attr("data-tl-"+[o])}}});var m=(typeof l.attr("data-tl")!=="undefined"&&typeof l.attr("data-tl")!==false?$.parseJSON(l.attr("data-tl")):[]);$.extend(true,n,m);if(ie<9){$.each(n,function(o,p){if(typeof e(n[o])!=="undefined"){n[o]=e(n[o])}if(typeof e(n[o])!=="undefined"){n[o]=e(n[o])}})}return n};var e=function(l){try{var m=l.split("(")}catch(n){return}if(typeof m[1]!=="undefined"){console.log("splitting");m=m[1].split(")")[0].split(",");return"rgb("+m[0]+","+m[1]+","+m[2]+")"}return};var i;var k=$(this);var f={arrowWidth:7,background:"#0084c2",borderRadius:"0.3em",color:"inherit",lineColor:"rgba(0, 0, 0, 0.3)",lineThickness:2,date:"",dateColor:"inherit",datePosition:"absolute",fadeIn:true,fadeLine:true,lineSpeed:1000,lineMaxBlur:100,fadeImages:true,image:"transparent",imageBorderRadius:"0.3em",imageBorderWidth:2,imageBorderColor:"rgba(220, 220, 220, 1)",distanceBetweenBoxAndImage:5,orientation:[{min:0,max:10000,orientation:"vertical"}],treeView:900,centered_boxes:true};var g=d($(this));$.extend(true,f,g,b);var j=function(){};var c=function(){var l=100/k.children(".timeline-block").length;i=(k.parent().width()>f.treeView);if(i===true){k.addClass("tl-large")}else{k.removeClass("tl-large")}k.children(".timeline-block").each(function(p){var n=$.extend(true,{},f);var m=d($(this));$.extend(true,n,m);for(var q=0;q<n.orientation.length;q++){if((k.parent().width()>n.orientation[q].min||typeof n.orientation[q].min==="undefined")&&(k.parent().width()<n.orientation[q].max||typeof n.orientation[q].max==="undefined")&&(typeof n.orientation[q].min!=="undefined"||typeof n.orientation[q].max!=="undefined")){$(this).attr("data-tl-orient",n.orientation[q].orientation);$(this).removeClass("tl-orient-vertical");$(this).addClass("tl-orient-"+n.orientation[q].orientation)}else{$(this).attr("data-tl-orient","vertical");$(this).removeClass("tl-orient-horizontal");$(this).addClass("tl-orient-vertical")}}if(typeof $(this).attr("data-tl-orient")==="undefined"||typeof $(this).attr("data-tl-orient")===false){$(this).attr("data-tl-orient","vertical")}if(n.centered_boxes===true){$(this).addClass("tl-centered-boxes")}if($(this).attr("data-tl-orient")=="vertical"){$(this).children(".timeline-line").css("top",$(this).children(".timeline-img").outerHeight(true));if(k.hasClass("tl-large")){$(this).children(".timeline-line").css("left",$(this).outerWidth()/2);$(this).children(".timeline-content").css("margin-left","")}else{$(this).children(".timeline-line").css("left",$(this).children(".timeline-img").outerWidth()/2);$(this).children(".timeline-content").css("margin-left",$(this).children(".timeline-img").outerWidth(true)+n.arrowWidth+n.distanceBetweenBoxAndImage)}$(this).css("width","").css("display","block")}else{$(this).children(".timeline-content").css("margin-left","");$(this).children(".timeline-line").css("top",$(this).children(".timeline-img").outerHeight(false)/2);$(this).children(".timeline-line").css("left",$(this).children(".timeline-img").outerWidth());$(this).css("width",l+"%").css("display","table-cell")}if($(this).attr("data-tl-orient")==="vertical"){if(i===true){if(p%2===1){$(this).children(".timeline-content").children(".timeline-arrow").css("border-right-color",n.background);$(this).children(".timeline-content").children(".timeline-arrow").css("border-left-color","transparent");$(this).children(".timeline-content").children(".timeline-arrow").css("left",-(n.arrowWidth*2))}else{$(this).children(".timeline-content").children(".timeline-arrow").css("border-left-color",n.background);$(this).children(".timeline-content").children(".timeline-arrow").css("border-right-color","transparent");$(this).children(".timeline-content").children(".timeline-arrow").css("left","100%")}}else{$(this).children(".timeline-content").children(".timeline-arrow").css("left",-(n.arrowWidth*2));$(this).children(".timeline-content").children(".timeline-arrow").css("border-right-color",n.background);$(this).children(".timeline-content").children(".timeline-arrow").css("border-left-color","transparent");$(this).children(".timeline-content").children(".timeline-date").css("color","white")}$(this).children(".timeline-content").children(".timeline-arrow").css("top",($(this).children(".timeline-img").outerHeight(true)/2)-n.arrowWidth);if(n.centered_boxes===true&&i===false){$(this).children(".timeline-content").children(".timeline-arrow").css("border-bottom-color",n.background);$(this).children(".timeline-content").children(".timeline-arrow").css("border-left-color","transparent");$(this).children(".timeline-content").children(".timeline-arrow").css("border-right-color","transparent");$(this).children(".timeline-content").children(".timeline-arrow").css("top",-n.arrowWidth*2);$(this).children(".timeline-content, .timeline-img").css("margin-left","0");var r=$(this).children(".timeline-img").outerHeight()+20+n.imageBorderWidth*2;$(this).css("margin-top",r);if(p===0){k.css("margin-top",r+20)}$(this).children(".timeline-img").css("margin-top",-(n.distanceBetweenBoxAndImage+r));$(this).children(".timeline-img").css("left",$(this).children(".timeline-content").outerWidth()/2-($(this).children(".timeline-img").outerWidth()/2));$(this).children(".timeline-line").css("left",$(this).children(".timeline-content").outerWidth()/2-(n.lineThickness/2)+1);$(this).find(".timeline-arrow").css("left",$(this).children(".timeline-content").outerWidth()/2-(n.arrowWidth))}else{$(this).children(".timeline-content").children(".timeline-arrow").css("border-bottom-color","transparent")}$(this).children(".timeline-content").children(".timeline-date").css("color",n.datecolor).css("position",n.dateposition)}if(!$(this).hasClass("tl-orient-vertical")){$(this).children(".timeline-content").children(".timeline-arrow").css("border-bottom-color",n.background);$(this).children(".timeline-content").children(".timeline-arrow").css("border-left-color","transparent");$(this).children(".timeline-content").children(".timeline-arrow").css("border-right-color","transparent");$(this).children(".timeline-content").children(".timeline-arrow").css("left",($(this).children(".timeline-img").outerWidth(true)/2)-n.arrowWidth/2);$(this).children(".timeline-content").children(".timeline-arrow").css("top",-(n.arrowWidth*2));$(this).children(".timeline-line").css("top",$(this).children(".timeline-img").outerHeight()/2+"px");$(this).children(".timeline-img").css("margin","0").css("margin-bottom","");$(this).children(".timeline-img").css("left","0")}})};var h=function(){k.children(".timeline-block").each(function(n){var q=$.extend(true,{},f);var r=d($(this));$.extend(true,q,r);if($(this).offset().top<=$(window).scrollTop()+$(window).height()*0.75&&($(this).children(".timeline-img").hasClass("is-hidden")||$(this).children(".timeline-content").hasClass("is-hidden"))){$(this).find(".timeline-content").removeClass("is-hidden").addClass("bounce-in");if(q.fadeImages===true){$(this).find(".timeline-img").removeClass("is-hidden").addClass("bounce-in");c()}}else{}if($("body").height()<=$(window).height()){$(this).find(".timeline-content").removeClass("is-hidden").addClass("bounce-in");if(q.fadeImages===true){$(this).find(".timeline-img").removeClass("is-hidden").addClass("bounce-in");c()}}if($("body").width()<=$(window).width()){$(this).find(".timeline-content").removeClass("is-hidden").addClass("bounce-in");if(q.fadeImages===true){$(this).find(".timeline-img").removeClass("is-hidden").addClass("bounce-in");c()}}if(q.fadeLine===true){var p=$(this).outerHeight(true)-$(this).children(".timeline-img").outerHeight();var s=$(this).outerWidth(true)-parseInt($(this).children(".timeline-line").css("left"));var u=$(document).height()-$(this).offset().top;var o=$(document).height()-$(window).scrollTop()-$(window).height();var l=$(window).height()/2;var t=$(this).offset().top-$(window).scrollTop();t=-t;t+=l;if(u-p<=l){t=-(o+u);t-=l;t=-o+p}var m=0;if($(this).attr("data-tl-orient")=="vertical"){t=(t>=p?p:t);m=(t/p)*100}else{t=(t>=s?s:t);m=(t/s)*100}if(ie<9){$(this).children(".timeline-line").css("background",q.lineColor);if($(this).attr("data-tl-orient")=="vertical"){$(this).children(".timeline-line").animate({height:t,width:q.lineThickness},q.lineSpeed,function(){});$(this).children(".timeline-line").css("background","linear-gradient(180deg, "+q.lineColor+" "+m+"%, rgba(0, 0, 0, 0))")}else{$(this).children(".timeline-line").clearQueue().animate({width:t,height:q.lineThickness},q.lineSpeed,function(){})}}else{if($(this).attr("data-tl-orient")=="vertical"){$(this).children(".timeline-line").css("height",t).css("width",q.lineThickness);$(this).children(".timeline-line").css("background","linear-gradient(180deg, "+q.lineColor+" "+m+"%, rgba(0, 0, 0, 0))")}else{$(this).children(".timeline-line").css("width",t).css("height",q.lineThickness);$(this).children(".timeline-line").css("background","linear-gradient(90deg, "+q.lineColor+" "+m+"%, rgba(0, 0, 0, 0))")}}}})};var a={update:function(){k.children(".timeline-block").each(function(){if($(this).children(".timeline-content").length<1){$(this).wrapInner($("<div class='timeline-content'></div>"))}if($(this).children(".timeline-img").length<1){$(this).prepend($("<div class='timeline-img'></div>"))}if($(this).children(".timeline-date").length<1){}if($(this).children(".timeline-content").children(".timeline-arrow").length<1){$(this).children(".timeline-content").append("<div class='timeline-arrow'></div>")}if($(this).children(".timeline-line").length<1){$(this).prepend($("<div class='timeline-line'></div>"))}});if(f.fadeIn===false){k.find(".timeline-img, .timeline-content").removeClass("is-hidden").addClass("bounce-in")}else{k.find(".timeline-content").addClass("is-hidden");if(f.fadeImages===true){k.find(".timeline-img").addClass("is-hidden")}}k.children(".timeline-block:nth-child(even)").addClass("tl-even");k.children(".timeline-block:nth-child(odd)").addClass("tl-odd");k.children(".timeline-block").each(function(){var m=$.extend(true,{},f);var l=d($(this));$.extend(true,m,l);var n=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");if(n.test(m.image)){m.image="url('"+m.image+"')"}$(this).children(".timeline-img").css("background-image",m.image).css("border-width",m.imageBorderWidth).css("border-color",m.imageBorderColor).css("border-radius",m.imageBorderRadius).css("-moz-border-radius",m.imageBorderRadius).css("-ms-border-radius",m.imageBorderRadius);$(this).children(".timeline-content").css("border-radius",m.borderRadius).css("-moz-border-radius",m.borderRadius).css("-ms-border-radius",m.borderRadius);$(this).children(".timeline-content").css("background",m.background).css("color",m.color);$(this).children(".timeline-content").children(".timeline-arrow").css("border-width",m.arrowWidth);$(this).children(".timeline-img").css("border-width",m.imageBorderWidth);$(this).children(".timeline-date").html(m.date);$(this).children(".timeline-line").css("transition-duration",m.lineSpeed+"ms")});c()}};j();c();a.update();h();$(window).on("resize",function(){c();h()});$(window).on("scroll",function(){h()});return a};$(function(){$("[data-tl-autoinit]").each(function(){$(this).timeline()})});var ie=(function(){var c,a=3,d=document.createElement("div"),b=d.getElementsByTagName("i");while(d.innerHTML="<!--[if gt IE "+(++a)+"]><i></i><![endif]-->",b[0]){}return a>4?a:c}());